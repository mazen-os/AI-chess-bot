# -*- coding: utf-8 -*-
"""untitled7.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/gist/mazen-os/0af8851ca4e203b9cf7876e5dfb6016e/untitled7.ipynb
"""

!pip install python-chess

import chess
import chess.svg  # Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© ÙƒØµÙˆØ±Ø©
import IPython.display

# Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ø¹Ø© Ø´Ø·Ø±Ù†Ø¬ Ø¬Ø¯ÙŠØ¯Ø©
board = chess.Board()

# Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø©
IPython.display.display_svg(chess.svg.board(board=board, size=400))

move = chess.Move.from_uci("e2e4")  # ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø±ÙƒØ© Ø¨ØµÙŠØºØ© UCI
board.push(move)  # ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø±ÙƒØ©

# Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø±ÙƒØ©
IPython.display.display_svg(chess.svg.board(board=board, size=400))

print(list(board.legal_moves))

move = chess.Move.from_uci("e2e3")
print(move in board.legal_moves)  # Ù‡ÙŠØ±Ø¬Ø¹ True Ù„Ùˆ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©ØŒ False Ù„Ùˆ Ù„Ø£

move = chess.Move.from_uci("e7e5")  # ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø±ÙƒØ© Ø¨ØµÙŠØºØ© UCI
board.push(move)  # ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø±ÙƒØ©

print(list(board.legal_moves))

move("g1f3")

!apt-get install stockfish

import chess
import chess.svg
import chess.engine
import IPython.display

# ØªØ´ØºÙŠÙ„ Ù…Ø­Ø±Ùƒ Stockfish
engine = chess.engine.SimpleEngine.popen_uci("/usr/games/stockfish")

# Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ø¹Ø© Ø´Ø·Ø±Ù†Ø¬ Ø¬Ø¯ÙŠØ¯Ø©
board = chess.Board()

# Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø©
def br(board):
    IPython.display.display_svg(chess.svg.board(board=board, size=400))

br(board)

def move(move_uci):
  if chess.Move.from_uci(move_uci) in board.legal_moves:
    board.push(chess.Move.from_uci(move_uci))
    IPython.display.display_svg(chess.svg.board(board=board, size=400))
  else:
    return "you cannot play this"


    # ğŸš€ Stockfish ÙŠØ­Ø³Ø¨ Ø£ÙØ¶Ù„ Ù†Ù‚Ù„Ø© Ù„Ù„Ø£Ø³ÙˆØ¯
    if not board.is_game_over():
        best_move = engine.play(board, chess.engine.Limit(time=0.5))  # ÙŠØ­Ø³Ø¨ Ø£ÙØ¶Ù„ Ø­Ø±ÙƒØ© ÙÙŠ 0.5 Ø«Ø§Ù†ÙŠØ©
        board.push(best_move.move)
        print(f"ğŸ¤– Stockfish Ù„Ø¹Ø¨: {best_move.move}")

    # Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‚Ù„ØªÙŠÙ†
    br(board)

br(board)

move("e2e4")

br(board)

# ğŸš€ Stockfish ÙŠØ­Ø³Ø¨ Ø£ÙØ¶Ù„ Ù†Ù‚Ù„Ø© Ù„Ù„Ø£Ø³ÙˆØ¯
    def play() :
      if not board.is_game_over():
        best_move = engine.play(board, chess.engine.Limit(time=0.5))  # ÙŠØ­Ø³Ø¨ Ø£ÙØ¶Ù„ Ø­Ø±ÙƒØ© ÙÙŠ 0.5 Ø«Ø§Ù†ÙŠØ©
        board.push(best_move.move)
        print(f"ğŸ¤– Stockfish Ù„Ø¹Ø¨: {best_move.move}")

    # Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‚Ù„ØªÙŠÙ†
      br(board)

play()

import chess
import chess.svg
import chess.engine
import IPython.display

# ØªØ´ØºÙŠÙ„ Ù…Ø­Ø±Ùƒ Stockfish
engine = chess.engine.SimpleEngine.popen_uci("/usr/games/stockfish")

# Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ø¹Ø© Ø´Ø·Ø±Ù†Ø¬ Ø¬Ø¯ÙŠØ¯Ø©
board = chess.Board()

# Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© Ù…Ø¹ ØªÙ„ÙˆÙŠÙ† Ø­Ø±ÙƒØ© Stockfish ÙÙ‚Ø·
def br(stockfish_move=None):
    board_svg = chess.svg.board(
        board=board,
        size=400,
        lastmove=stockfish_move,  # ØªÙ„ÙˆÙŠÙ† Ø­Ø±ÙƒØ© Stockfish ÙÙ‚Ø·
        colors={"lastmove": "#00FF00"}  # Ø£Ø®Ø¶Ø± Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
    )
    IPython.display.display_svg(board_svg)

br()  # Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©

# Ø¯Ø§Ù„Ø© Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø±ÙƒØ© Ø«Ù… Ø±Ø¯ Stockfish Ù…Ø¹ ØªÙ„ÙˆÙŠÙ† Ø­Ø±ÙƒØªÙ‡
def move(move_uci):
    move = chess.Move.from_uci(move_uci)
    if move in board.legal_moves:
        board.push(move)  # ØªÙ†ÙÙŠØ° Ø­Ø±ÙƒØ© Ø§Ù„Ù„Ø§Ø¹Ø¨
        print(f"âœ… Ø£Ù†Øª Ù„Ø¹Ø¨Øª: {move_uci}")

        # ğŸš€ Stockfish ÙŠØ­Ø³Ø¨ Ø£ÙØ¶Ù„ Ù†Ù‚Ù„Ø© Ù„Ù„Ø£Ø³ÙˆØ¯
        if not board.is_game_over():
            best_move = engine.play(board, chess.engine.Limit(time=0.00001))  # Ø§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ Ù†Ù‚Ù„Ø© Ø®Ù„Ø§Ù„ 0.5 Ø«Ø§Ù†ÙŠØ©
            board.push(best_move.move)  # ØªÙ†ÙÙŠØ° Ø­Ø±ÙƒØ© Stockfish
            print(f"ğŸ¤– Stockfish Ù„Ø¹Ø¨: {best_move.move}")

            # Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© Ù…Ø¹ ØªÙ„ÙˆÙŠÙ† Ø­Ø±ÙƒØ© Stockfish
            br(stockfish_move=best_move.move)
        else:
            br()  # Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù‚Ø¹Ø© Ø¨Ø¯ÙˆÙ† ØªÙ„ÙˆÙŠÙ† (Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª)
    else:
        print(f"âŒ Ø§Ù„Ø­Ø±ÙƒØ© {move_uci} ØºÙŠØ± Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©!")

move("d2d6")



